{% extends 'base.html' %}

{% block title %}API & Batch Job{% endblock %}

{% block content %}

<h2>API & Batch Job Management</h2>

<!-- Välj vy för API eller batch-jobb -->
<form method="GET" action="{{ url_for('api_batch_management') }}">
    <label for="view_type">Välj vy:</label>
    <select name="view_type" onchange="this.form.submit()">
        <option value="api_docs" {% if view_type == 'api_docs' %}selected{% endif %}>API-dokumentation</option>
        <option value="batch_job" {% if view_type == 'batch_job' %}selected{% endif %}>Starta batch-jobb</option>
    </select>
</form>

<hr>

{% if view_type == 'api_docs' %}
    <!-- API-dokumentation -->
    <h3>API-dokumentation</h3>
    <p>Här kan du se dokumentation för API-anrop.</p>
    <pre>
        /api/<customer_id> - Hämta kundinformation.
        /api/accounts/<account_id> - Hämta transaktioner för ett konto.
    </pre>

{% elif view_type == 'batch_job' %}
    <!-- Starta Batch-jobb -->
    <h3>Starta Batch-jobb</h3>
    <form method="POST" action="{{ url_for('run_batch_process') }}">
        <button type="submit">Kör Batch-jobb</button>
    </form>

    {% if batch_status %}
        <p>Batch-jobbet är nu <strong>{{ batch_status }}</strong>.</p>
    {% endif %}

{% endif %}

{% endblock %}
